# data 模板说明

此目录为“数据（data）”代码模板，负责组织项目中与数据加载、预处理与分发相关的实现与工具。README 只说明目录定位、接口约定与使用方式，不涉及具体实现细节或文件内容。

目的
- 集中管理数据集定义、数据增强、采样与批处理逻辑，便于复用与替换。
- 约定统一的数据接口，降低训练/评估代码对底层 I/O 与预处理实现的耦合。
- 支持高效的数据管线（缓存、预取、并行读取）与分布式训练下的正确采样。

建议目录组织
- data/
  - __init__.py          # 可选：导出常用数据集或注册器入口
  - datasets.py          # 可选：按任务或数据集实现 Dataset 类
  - transforms.py        # 可选：数据增强与预处理函数或流水线
  - samplers.py          # 可选：自定义采样器（如不均衡采样、分布式采样）
  - collate.py           # 可选：自定义 collate_fn 实现
  - factory.py           # 可选：数据集/loader 构造器，按配置创建实例
  - utils.py             # 可选：数据相关辅助函数（缓存、下载、解压等）
  - tests/               # 可选：数据加载与预处理单元测试
  - README.md            # 本文件

接口约定（建议）
- Dataset 类应兼容标准库/框架接口（例如 torch.utils.data.Dataset）：
  - 实现 __len__() 与 __getitem__()，并支持外部传入 transform/collate。
- DataLoader/工厂应支持通过配置创建，并暴露可选的 collate_fn、sampler、batch_size、num_workers 等参数。
- 支持可复现的数据拆分与随机种子控制，明确多进程/多线程读取下的行为。
- 在分布式训练场景下，建议提供与 torch.distributed 兼容的采样策略或同步工具。

使用与扩展
- 新增数据集或预处理时，请遵循统一接口并在 factory 或 __init__ 中注册，便于训练脚本按名称加载。
- 将 I/O（读取/解码）与预处理（增强/标准化）分离，便于复用与测试。
- 将可变超参（图像大小、归一化参数、增强概率等）暴露在构造函数或配置中。

测试与验证
- 为数据加载与预处理添加单元测试，覆盖路径错误、空样本、不同数据格式与边界情况。
- 验证 batch 形状、类型与设备迁移（CPU/GPU）逻辑是否按预期工作。
- 在分布式/多线程场景下，测试采样完整性与重现性。

维护提示
- 避免在数据模块中耦合训练/优化逻辑；仅负责数据获取与转换。
- 文档化数据来源、预期输入格式与输出格式，便于团队成员使用与调试。
- 优先实现确定性且高效的数据管线；对需要网络下载或外部依赖的部分提供清晰的失败重试与缓存策略。