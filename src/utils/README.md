# utils 模板说明

此目录为“工具模块”模板，用于集中放置训练/评估/推理流程中通用的辅助代码（例如日志、检查点、可视化、配置与小工具）。README 仅说明目录定位、接口约定与使用方式，不涉及具体实现或文件内容。

目标
- 提供统一的工具集合，减少各处重复代码，便于在不同实验中复用。
- 规范工具模块的接口与行为，降低训练/评估代码对具体实现的耦合。

建议目录结构（示例）
- utils/
  - __init__.py          # 可选：导出常用工具或注册器入口
  - logger.py            # 日志与实验记录接口（控制台/文件/CSV）
  - checkpoint.py        # 模型/优化器保存与加载接口
  - visualization.py     # 训练/评估可视化函数（保存图片、曲线）
  - config.py            # 可选：配置加载与转换工具
  - helpers.py           # 可选：通用小工具（路径、种子、设备处理）
  - tests/               # 可选：工具单元测试
  - README.md            # 本文件

接口约定（建议）
- 清晰的函数/类边界：工具应以函数或类提供明确方法（例如 save_checkpoint(state, path) / Logger.log(dict)）。
- 参数以原子类型或配置字典为主，避免传入复杂的训练循环对象。
- 返回尽量简单（例如布尔值、路径或字典），便于上层脚本处理错误与结果。
- I/O 操作应支持幂等（exist_ok、覆盖选项）和并发安全的基本处理。

使用方式
- 在训练脚本中按需导入工具：from src.utils import logger, checkpoint, visualization。
- 保持工具与训练逻辑分离：工具仅负责记录、存取与绘图；训练循环负责调用它们。
- 在项目入口集中初始化（例如创建实验目录、Logger 实例），并将路径传入其它模块。

测试与验证
- 为每个工具编写小型单元测试，覆盖路径创建、保存/加载正确性和异常处理。
- 可使用临时目录（tmpdir）避免对真实实验数据造成影响。

维护提示
- 避免在工具中嵌入训练策略或超参数选择逻辑。
- 保持向后兼容性：当修改接口时，更新 README 与对应单元测试。
- 文档化每个工具的输入/输出和错误行为，便于团队协作与复现。

简短示例（伪代码）
- Logger 初始化并记录：
  - logger = Logger(exp_dir); logger.log({"epoch": 1, "loss": 0.5})
- 保存检查点：
  - save_checkpoint(state, save_path)
- 绘图保存：
  - plot_training_summary(train_losses, val_metrics, save_dir)

